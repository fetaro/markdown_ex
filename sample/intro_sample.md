01020304050607080910111213141516171819202122232425262728293031323334353637

イントロダクション
======================================

RDBだけだと辛くないですか？
--------------------------------------

### リレーショナルデータベースはデファクトスタンダード

現在、ほとんどコンピュータシステムにおいてデータベースはリレーショナルデータベースが採用されています。皆さんの担当されているシステムでもデータベースはリレーショナルデータベースではないでしょうか。DB-ENGINES[^1]というWebサイトでは、データベースの各プロダクトについてWeb上での登場回数や転職サイトでのスキル保有数などを集計し、データベースの人気ランキングを紹介しています。このサイトによると、ランキング上位３つのデータベースはOracle、MySQL、そして Microsoft SQL Serverであり、これらは全てリレーショナルデータベースです。ポイントも４位以下と比較してダントツに高いです([[img_db-ranking.png]]参照)。

[^1]: http://db-engines.com/en/ranking

![DBランキングの抜粋](img_db-ranking.png){: id="img_db-ranking.png"}



#### テーブル設計が大変

まずはじめに問題となったのはテーブル設計です。取得したJSONの一部に着目してみましょう([[code_twitter-url]])。

{: title="取得したtwitterデータの一部" id="code_twitter-url"}
~~~
	"entities" : {
		"urls" : [　　・・・・・(1)
			{
				"display_url" : "dismaying.pw/detail.php?id=…",
				"expanded_url" : "http://dismaying.pw/detail.php?id=32323735",
				"indices" : [　　・・・・・(2)
					0,
					22
				],
				"url" : "http://t.co/W6zFL4bklg"
			},
~~~

`"entries"`の中にある`"urls"`([[twitter-url]]の(1))のキーの値には`[`という記号が書いてありますが、これは配列の始まりを意味します。この後に続く要素は複数個ある可能性があるわけです。テーブル設計をする場合このような関係は一対多の関係になるため、テーブルを分けるのが一般的です。さらに、`"urls"`の中にある`"indices"`([[code_twitter-url]]の(2))も一対多の関係にあります。よって、この部分を表現するためには、追加で２つのテーブルが必要になりました。


### NoSQLとは

「NoSQL」という単語に明確な定義はありません([[column_nosql-meaning]])。しかしNoSQLに分類されるデータベースには共通する特徴があります。本書では理解しやすくするために、NoSQLを以下のように定義しましょう。

1. リレーショナルモデル以外を採用し、非構造データが扱える
2. 水平分散によりビッグデータを高速に処理できる
3. 近年(2005年以降ぐらい)から登場し、広く使われている



{: title="NoSQLという名前は紛らわしい" id="column_nosql-meaning"}
<div class="column">

筆者はNoSQLという名前は好きではありません。二つ理由があります。

一つ目は、「No SQL」と読むとSQLを否定している意味になるためです。この呼び方は、以前はリレーショナルデータベース陣営から猛烈に反発を食らいました。最近ではようやく「Not Only SQL」の意味合いが理解されてきましたが、それでも紛らわしいと思います。「No SQL」と誤解されないように「NOSQL」とOを大文字にして表現されている方もいるぐらいです。

二つ目の理由は、Not Onlyだとしても意味が大きすぎることです。本文でも書きましたが、SQLだけではないデータベースは山ほどあります。OpenLDAPしかりSolrしかりです。現在NoSQLと呼ばれているデータベースはその中の一部です。

おそらくNoSQLという名前はほどなくなくなるでしょう。どう呼ばれるかというと、ドキュメント型データベース、グラフ型データベース、キーバリューストアなど、データモデルに従った呼ばれ方をするでしょう。

それでもあえて名前を付けるのであれば、スケーラブル・スキーマレス・オペレーショナルデータベースでしょうか（笑）

</div>
